apiVersion: v1
kind: ConfigMap
metadata:
  name: analytics-service-config
  namespace: urlshortener
data:
  # Analytics Service Settings
  SERVER_PORT: "8082"

  # Kafka Consumer Configuration
  KAFKA_TOPIC_URL_ACCESS: "url-access-events"
  KAFKA_TOPIC_URL_LIFECYCLE: "url-lifecycle-events"

  SPRING_KAFKA_CONSUMER_GROUP_ID: "analytics-service-group"
  SPRING_KAFKA_CONSUMER_AUTO_OFFSET_RESET: "earliest"
  SPRING_KAFKA_CONSUMER_ENABLE_AUTO_COMMIT: "false"
  SPRING_KAFKA_CONSUMER_MAX_POLL_RECORDS: "500"

  # Kafka Listener Configuration
  SPRING_KAFKA_LISTENER_CONCURRENCY: "3"
  SPRING_KAFKA_LISTENER_ACK_MODE: "manual"

  # Analytics Processing
  ANALYTICS_BATCH_SIZE: "100"
  ANALYTICS_BATCH_TIMEOUT_MS: "5000"
  ANALYTICS_AGGREGATION_INTERVAL_MS: "60000"

  # IP Geolocation
  GEOLOCATION_ENABLED: "true"
  GEOLOCATION_API_TIMEOUT_MS: "2000"

  # Management Endpoints
  MANAGEMENT_ENDPOINTS_WEB_EXPOSURE_INCLUDE: "health,info,metrics,prometheus"
  MANAGEMENT_ENDPOINT_HEALTH_SHOW_DETAILS: "always"
