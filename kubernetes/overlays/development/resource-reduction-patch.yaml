# Patch to reduce resource requests for limited memory environments
# Apply with: kubectl apply -k overlays/development/

# Reduce PostgreSQL resources
- op: replace
  path: /spec/template/spec/containers/0/resources
  value:
    requests:
      cpu: 250m
      memory: 512Mi
    limits:
      cpu: 1000m
      memory: 1Gi

---
# Reduce Redis resources
- op: replace
  path: /spec/template/spec/containers/0/resources
  value:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 250m
      memory: 256Mi

---
# Reduce Kafka resources
- op: replace
  path: /spec/template/spec/containers/0/resources
  value:
    requests:
      cpu: 250m
      memory: 512Mi
    limits:
      cpu: 1000m
      memory: 1Gi

---
# Reduce Zookeeper resources
- op: replace
  path: /spec/template/spec/containers/0/resources
  value:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi

---
# Reduce URL Service resources
- op: replace
  path: /spec/template/spec/containers/0/resources
  value:
    requests:
      cpu: 150m
      memory: 384Mi
    limits:
      cpu: 500m
      memory: 768Mi

---
# Reduce Analytics Service resources
- op: replace
  path: /spec/template/spec/containers/0/resources
  value:
    requests:
      cpu: 250m
      memory: 512Mi
    limits:
      cpu: 750m
      memory: 1Gi

---
# Reduce API Gateway resources
- op: replace
  path: /spec/template/spec/containers/0/resources
  value:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 300m
      memory: 512Mi

---
# Reduce Frontend resources
- op: replace
  path: /spec/template/spec/containers/0/resources
  value:
    requests:
      cpu: 50m
      memory: 64Mi
    limits:
      cpu: 100m
      memory: 128Mi
